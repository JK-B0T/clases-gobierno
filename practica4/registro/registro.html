<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Registro</title>
  <meta name="description" content="HTML5, CSS3">
  <meta name="author" content="Aaron Grau">
  <link rel="stylesheet" href="css/estilos.css">

</head>
<body>

	<form id="registro" method="post">
		<h1>Regístrate!</h1>
		<ul>
			<li>
				<label for="nombre">Mi nombre es:</label>
				<input type="text" id="nombre" name="nombre" required >
			</li>
			<li>
				<label for="email">Mi email es:</label>
				<input type="email" id="email" name="email" required multiple>
			</li>
			<li>
				<label for="recuerdame">Recuérdame en este equipo</label>
				<input type="checkbox"  value="true"  id="recuerdame"> 
			</li>
			<li>
				<label for="url">Mi dirección web es:</label>
				<input type="url" id="url" name="url" placeholder="http://ejemplo.com">
			</li>
			<li>
				<label for="password1">Me gustaría que mi password fuera:</label>
				<p>(al menos 6 caracteres, sin espacios)</p>
				<input type="password" id="password1" name="password1" pattern="\S{6,}" required>
			</li>
			<li>
				<label for="password2">Mi password repetida es:</label>
				<input type="password" id="password2" name="password2" pattern="\S{6,}" required>
			</li>
			<li>
				<label for="conocimientos">En una escala de 1 a 10, mis conocimientos de HTML5 son:</label>
				<input type="range" id="conocimientos" name="conocimientos" min="1" max="10">
			</li>
			<li>
				<label for="fechaInicio">Por favor, inicia mi suscripción el día:</label>
				<input type="date" id="fechaInicio" name="fechaInicio" placeholder="dd/mm/aaaa" required>
			</li>
			<li>
				<label for="cantidad">Me gustaría recibir 
					<input type="number" name="cantidad" id="cantidad" value="1" min="0" max="5"> 
					copias de <cite>El manual de HTML5</cite>.
				</label>
			</li>
			<li>
				<label for="tambienCSS3">También regístrame para <cite>El manual de CSS3</cite></label>
				<input id="tambienCSS3" name="tambienCSS3" type="checkbox">
			</li>
			<li>
				<input type="submit" id="registro-submit" value="Envíame"/>
			</li>
		</ul>
	</form>
</body>

<script>
	//const boton = document.getElementById("registro-submit");
	let fechaActual = new Date();
	let fechaInicio;

	let pass1;
	let pass2;

	function validarContrasenya() {
		console.log(pass1.value, pass2.value);
		if (pass1.value !== pass2.value) {
			pass2.setCustomValidity("Las passwords deben coincidir");
		} else {
			pass2.setCustomValidity('');
		}
	}

	function validarFecha() {
		console.log(fechaInicio.valueAsDate, fechaActual);
		if (fechaInicio.valueAsDate < fechaActual) {
			fechaInicio.setCustomValidity("La fecha de inicio no puede ser menor a la fecha actual");
		} else {
			fechaInicio.setCustomValidity('');
		}
	}

	function iniciar() {
		document.getElementById("nombre").focus();
		pass1 = document.getElementById("password1");
		pass2 = document.getElementById("password2");
		fechaInicio = document.getElementById("fechaInicio");

		pass1.addEventListener("input", validarContrasenya, false);
		pass2.addEventListener("input", validarContrasenya, false);
		fechaInicio.addEventListener("input", validarFecha, false);
	}

	window.addEventListener("load", iniciar
	, false);

	/*boton.addEventListener("click", () => { //Añade un evento de click al submit donde se compueba si las contraseñas son iguales y si la fecha de inicio es menor a la acutal
		

	});*/
</script>
</html>